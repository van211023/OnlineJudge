import{d as e,g as l,z as a,i as t,_ as n,r as o,o as d,c as s,j as u,b as r,k as i,l as m,A as c,m as p}from"./vendor.89c38d11.js";import{c as v,g as w}from"./index.437ff7e1.js";const g=r("h1",null,"登录",-1),y=r("label",null,"用户名",-1),f=r("label",null,"密码",-1),h=r("label",null,"验证码",-1),k={style:{width:"100%","padding-bottom":"0.5em"}},V=p("登录");var b=e({setup(e){var p,b;let j=l(""),C=l(""),I=l(""),S=l(""),U=l("");function _(){w().then((e=>{I.value=e.img,U.value=e.uuid}))}function x(e){13==e.keyCode&&L()}a((async()=>{_(),window.addEventListener("keydown",x)}));const R=t();let q=(null==(p=R.currentRoute.value.query.contestId)?void 0:p.toString())||"",E=(null==(b=R.currentRoute.value.query.redirect)?void 0:b.toString())||"";function L(){""===j.value?n.warning("用户名不能为空~~"):""===C.value?n.warning("密码不能为空~~"):v({data:{name:j.value,password:C.value,contestId:q,uuid:U.value,verifyCode:S.value}}).then((e=>{var l,a;window.removeEventListener("keydown",x,!1),l=e.data.name,a=e.data.token,window.localStorage.setItem("name",l),window.localStorage.setItem("token",a),R.push(decodeURIComponent(E||"/"))}))}return(e,l)=>{const a=o("el-input"),t=o("el-button"),n=o("el-col"),p=o("el-row");return d(),s(p,{class:"login-style",justify:"center"},{default:u((()=>[r(n,{span:18,lg:{span:6},md:{span:8},xs:{span:20},class:"login"},{default:u((()=>[g,y,r(a,{placeholder:"username",modelValue:i(j),"onUpdate:modelValue":l[1]||(l[1]=e=>m(j)?j.value=e:j=e)},null,8,["modelValue"]),f,r(a,{type:"password",placeholder:"password",modelValue:i(C),"onUpdate:modelValue":l[2]||(l[2]=e=>m(C)?C.value=e:C=e),"show-password":""},null,8,["modelValue"]),h,r("div",k,[r(a,{modelValue:i(S),"onUpdate:modelValue":l[3]||(l[3]=e=>m(S)?S.value=e:S=e),style:{width:"10em"}},null,8,["modelValue"]),i(I)?(d(),s("img",{key:0,src:"data:image/jpeg;base64,"+i(I),style:{float:"right",padding:"0.8em 0"},onClick:_},null,8,["src"])):c("",!0)]),r(t,{type:"primary",onClick:l[4]||(l[4]=e=>L()),style:{width:"100%"}},{default:u((()=>[V])),_:1})])),_:1})])),_:1})}}});export default b;

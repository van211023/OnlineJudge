import"./index.4d66c970.js";import{d as e,r as a,b as l,_ as t,a as n,c as o,u as s,p as d,e as u,g as r,h as i,i as m,k as p,A as c,B as v,l as g,n as w}from"./vendor.e45b1972.js";const y=g();d("data-v-11589291");const f=m("h1",null,"计网 OJ Admin",-1),h=m("label",null,"用户名",-1),k=m("label",null,"密码",-1),V=m("label",null,"验证码",-1),b={style:{width:"100%","padding-bottom":"0.5em"}},C=w("登录");u();var _=e({expose:[],setup(e){var d,u;let g=a(""),w=a(""),_=a(""),I=a(""),j=a("");function x(){n.get("common/verifyCode").then((e=>{_.value=e.img,j.value=e.uuid}))}function S(e){13==e.keyCode&&q()}l((async()=>{x(),window.addEventListener("keydown",S)}));const U=s();null==(d=U.currentRoute.value.query.contestId)||d.toString();let R=(null==(u=U.currentRoute.value.query.redirect)?void 0:u.toString())||"";function q(){var e;""===g.value?t.warning("用户名不能为空~~"):""===w.value?t.warning("密码不能为空~~"):(e={data:{name:g.value,password:w.value,uuid:j.value,verifyCode:I.value}},n.post("/user/login",e)).then((e=>{var a,l;window.removeEventListener("keydown",S,!1),a=e.data.name,l=e.data.token,window.localStorage.setItem("name",a),window.localStorage.setItem("token",l),U.push(decodeURIComponent(R||"/"))}))}return(e,a)=>{const l=r("el-input"),t=r("el-button"),n=r("el-col"),s=r("el-row");return i(),o(s,{class:"login-style",justify:"center",style:{"margin-top":"10vh"}},{default:y((()=>[m(n,{span:20,lg:{span:8},md:{span:10},xs:{span:22},class:"login"},{default:y((()=>[f,h,m(l,{placeholder:"username",modelValue:p(g),"onUpdate:modelValue":a[1]||(a[1]=e=>c(g)?g.value=e:g=e)},null,8,["modelValue"]),k,m(l,{type:"password",placeholder:"password",modelValue:p(w),"onUpdate:modelValue":a[2]||(a[2]=e=>c(w)?w.value=e:w=e)},null,8,["modelValue"]),V,m("div",b,[m(l,{modelValue:p(I),"onUpdate:modelValue":a[3]||(a[3]=e=>c(I)?I.value=e:I=e),style:{width:"10em"}},null,8,["modelValue"]),p(_)?(i(),o("img",{key:0,src:"data:image/jpeg;base64,"+p(_),style:{float:"right",padding:"0.8em 0"},onClick:x},null,8,["src"])):v("",!0)]),m(t,{type:"primary",onClick:a[4]||(a[4]=e=>q()),style:{width:"100%"}},{default:y((()=>[C])),_:1})])),_:1})])),_:1})}}});_.__scopeId="data-v-11589291";export default _;

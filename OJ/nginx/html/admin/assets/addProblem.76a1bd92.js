import"./index.4d66c970.js";import{d as e,r as t,c as l,i as o,g as a,h as n,D as i,k as d,A as s,F as u,j as p,n as r,a as c,R as m,b as g,q as f,t as v,u as h,y,B as b}from"./vendor.e45b1972.js";import{d as j}from"./dynamicLoadScript.32e4a333.js";import{_ as w}from"./notification.8e3fe923.js";const _=o("span",{class:"commit"},[r(" (单位: "),o("strong",null,"秒"),r(") ")],-1),x=o("span",{class:"commit"},[r(" (单位: "),o("strong",null,"秒"),r(") ")],-1),S=o("span",{class:"commit"},[r(" (单位: "),o("strong",null,"M"),r("字节) ")],-1),V=o("span",{class:"commit"},"推荐采用md格式",-1),F=r("提交");var k=e({expose:[],props:{params:{type:Object,default:null}},setup(e){let r={pdf:"pdf",md:"markdown",html:"html"},g=t(["特判程序","评测数据"]),f=t(),v=t(),h=t(),y=t(),b=t(),j=t(),w=t(),k=t(),U=t(),I=t(),L=m();function T(){let e=new Object;e.title=f.value,e.source=v.value,e.author=h.value,e.docType=y.value,e.timeLimit=String(b.value),e.timeLimitSpc=String(j.value),e.memoryLimit=String(w.value),e.isSpj=String("评测数据"==k.value?0:1),e.judgeFiles=String(U.value),e.score=I.value;let t=new Object;t.data=e,c.post("admin/problem/add",t).then((e=>{console.log(e.data);let t=e.data.problemId;console.log(t),null==L||L.emit("go",{params:{docType:y.value,isSpj:String("评测数据"==k.value?0:1),pid:String(t),judgeFile:String(U.value)}})}))}return(e,t)=>{const c=a("el-input"),m=a("el-form-item"),L=a("el-input-number"),q=a("el-option"),C=a("el-select"),P=a("el-form"),z=a("el-button");return n(),l("div",null,[o(P,{"label-width":"80px",style:{"margin-left":"auto"}},{default:i((()=>[o(m,{label:"题目标题"},{default:i((()=>[o(c,{modelValue:d(f),"onUpdate:modelValue":t[1]||(t[1]=e=>s(f)?f.value=e:f=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),o(m,{label:"题目时限"},{default:i((()=>[o(L,{modelValue:d(b),"onUpdate:modelValue":t[2]||(t[2]=e=>s(b)?b.value=e:b=e),"controls-position":"right",style:{width:"150px"}},null,8,["modelValue"]),_])),_:1}),o(m,{label:"特别时限"},{default:i((()=>[o(L,{modelValue:d(j),"onUpdate:modelValue":t[3]||(t[3]=e=>s(j)?j.value=e:j=e),"controls-position":"right",style:{width:"150px"}},null,8,["modelValue"]),x])),_:1}),o(m,{label:"内存限制"},{default:i((()=>[o(L,{modelValue:d(w),"onUpdate:modelValue":t[4]||(t[4]=e=>s(w)?w.value=e:w=e),"controls-position":"right",style:{width:"150px"}},null,8,["modelValue"]),S])),_:1}),o(m,{label:"题目作者"},{default:i((()=>[o(c,{modelValue:d(h),"onUpdate:modelValue":t[5]||(t[5]=e=>s(h)?h.value=e:h=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),o(m,{label:"分数"},{default:i((()=>[o(c,{modelValue:d(I),"onUpdate:modelValue":t[6]||(t[6]=e=>s(I)?I.value=e:I=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),o(m,{label:"题目来源"},{default:i((()=>[o(c,{modelValue:d(v),"onUpdate:modelValue":t[7]||(t[7]=e=>s(v)?v.value=e:v=e),style:{width:"300px"}},null,8,["modelValue"])])),_:1}),o(m,{label:"题面类型"},{default:i((()=>[o(C,{modelValue:d(y),"onUpdate:modelValue":t[8]||(t[8]=e=>s(y)?y.value=e:y=e)},{default:i((()=>[(n(!0),l(u,null,p(d(r),((e,t)=>(n(),l(q,{key:t,label:e,value:t},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),V])),_:1}),o(m,{label:"判题方式"},{default:i((()=>[o(C,{modelValue:d(k),"onUpdate:modelValue":t[9]||(t[9]=e=>s(k)?k.value=e:k=e)},{default:i((()=>[(n(!0),l(u,null,p(d(g),((e,t)=>(n(),l(q,{key:t,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(m,{label:"评测组数"},{default:i((()=>[o(L,{modelValue:d(U),"onUpdate:modelValue":t[10]||(t[10]=e=>s(U)?U.value=e:U=e),"controls-position":"right",style:{width:"150px"}},null,8,["modelValue"])])),_:1})])),_:1}),o(z,{onClick:T},{default:i((()=>[F])),_:1})])}}});const U=r("选择文件"),I=r("提交");var L=e({expose:[],props:{pid:{type:String,default:""}},setup(e){const s=e;let u=m(),p=t(),r=t(0);function g(e,t){r.value=0}function f(e){let t=new FormData;t.append("problemFile",e.file),t.append("problemId",String(s.pid)),t.append("docType","html");const l={onUploadProgress:e=>{r.value=Number((e.loaded/e.total*100).toFixed(2))}};c.post("/admin/problem/doc",t,l).then((e=>{}))}function v(){null==u||u.emit("go",{})}return(e,t)=>{const s=a("el-button"),u=a("el-upload"),c=a("el-progress");return n(),l("div",null,[o(u,{id:"upload",class:"upload-demo",action:"#",style:{width:"200px"},multiple:!1,limit:1,"http-request":f,"on-remove":g,"show-file-list":!0,accept:".html","file-list":d(p)},{default:i((()=>[o(s,{type:"primary"},{default:i((()=>[U])),_:1})])),_:1},8,["file-list"]),o(c,{"stroke-width":16,percentage:d(r)},null,8,["percentage"]),o(s,{style:{"margin-top":"20px"},onClick:v},{default:i((()=>[I])),_:1})])}}});const T=r("选择文件"),q=r("提交");var C=e({expose:[],props:{pid:{type:String,default:""}},setup(e){const s=e;let u=m(),p=t([]),r=new FormData;g((()=>{p.value=[]}));let f=t(0);function v(e){r.append("problemFile",e.file),r.append("problemId",String(s.pid)),r.append("docType","pdf");const t={onUploadProgress:e=>{f.value=Number((e.loaded/e.total*100).toFixed(2))}};c.post("/admin/problem/doc",r,t)}function h(e,t){f.value=0}function y(){null==u||u.emit("go",{})}return(e,t)=>{const s=a("el-button"),u=a("el-upload"),r=a("el-progress");return n(),l("div",null,[o(u,{id:"upload",class:"upload-demo",action:"#",style:{width:"200px"},multiple:!1,limit:1,"http-request":v,"show-file-list":!0,accept:".pdf","on-remove":h,"file-list":d(p)},{default:i((()=>[o(s,{type:"primary"},{default:i((()=>[T])),_:1})])),_:1},8,["file-list"]),o(r,{"stroke-width":16,percentage:d(f)},null,8,["percentage"]),o(s,{style:{"margin-top":"20px"},onClick:y},{default:i((()=>[q])),_:1})])}}});const P={style:{height:"100%"}},z=o("div",{id:"docUpload"},null,-1),E=r("提交");var D=e({expose:[],props:{type:{type:String},pid:{type:String},contestId:{type:String}},setup(e){const t=e;let d=f({editor:null}),s=m();function u(){var e=new URLSearchParams;e.append("problemId",String(t.pid)),e.append("docType","md"),e.append("problemContent",d.editor.getMarkdown()),c.post("/admin/problem/text",e).then((e=>{200==e.code&&w({title:"成功",message:"上传成功",type:"success"})})).catch((function(e){alert(e)})),null==s||s.emit("go",{})}function p(e){if(!e||0===e.length)throw new Error('argument "path" is required !');var t=document.getElementsByTagName("head")[0],l=document.createElement("link");l.href=e,l.rel="stylesheet",l.type="text/css",t.appendChild(l)}return g((async()=>{(async function(){p("/admin//editormd/css/editormd.css"),p("/admin//editormd/css/editormd.preview.min.css");const e=["https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js","https://cdnjs.gtimg.com/cdnjs/libs/zepto/1.1.4/zepto.min.js","https://cdn.jsdelivr.net/gh/yremp/editormd/editormd.js","https://cdn.jsdelivr.net/gh/yremp/editormd/lib/marked.min.js","https://cdn.jsdelivr.net/gh/yremp/editormd/lib/prettify.min.js","https://cdn.jsdelivr.net/gh/yremp/editormd/lib/flowchart.min.js","https://cdn.jsdelivr.net/gh/yremp/editormd/lib/underscore.min.js","https://cdn.jsdelivr.net/npm/pdfjs-dist@2.8.335/build/pdf.min.js"];return Promise.all(e.map((e=>j(e))))})().then((()=>{d.editor=editormd("docUpload",{width:"100%",height:"70vh",path:"/admin//editormd/lib/",codeFold:!0,saveHTMLToTextarea:!0,searchReplace:!0,taskList:!0,syncScrolling:"single",tex:!0,toolbarIcons:function(){return["undo","redo","|","bold","del","italic","quote","ucwords","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","link","reference-link","code","preformatted-text","code-block","table","datetime","html-entities","pagebreak","|","goto-line","watch","preview","clear","search","|","help","info"]},onload:function(){}})}))})),(e,t)=>{const d=a("el-button");return n(),l("div",P,[z,o("div",null,[o(d,{plain:"",onClick:u},{default:i((()=>[E])),_:1})])])}}});const M=o("p",null,"上传ZIP文件.",-1),N=o("p",null,"(请确保你的测试文件名称为1-n, 并且以.in和.out为结尾)",-1),O=r("选择文件"),A=r("返回"),B=r("请保证评测数据组数为 ");var G=e({expose:[],props:{judgeFiles:{type:String,default:""},pid:{type:String,default:""}},setup(e){const s=e;let u=m(),p=t(),r=new FormData,g=t(0),f=t(!0),y=h();function b(e,t){g.value=0}function j(e){r.append("problemId",String(s.pid)),r.append("judgeFile",e.file),r.append("judgeFiles",s.judgeFiles);const t={onUploadProgress:e=>{g.value=Number((e.loaded/e.total*100).toFixed(2))}};c.post("/admin/problem/data",r,t).then((e=>{"200"==e.code&&(f.value=!1,null==u||u.emit("done",{}))}))}function w(){y.push("/problem")}return(e,t)=>{const u=a("el-button"),r=a("el-upload"),c=a("el-progress");return n(),l("div",null,[M,N,o(r,{id:"upload",class:"upload-demo",action:"#",style:{width:"200px"},multiple:!1,limit:1,"on-remove":b,"http-request":j,"show-file-list":!0,accept:".zip","file-list":d(p)},{default:i((()=>[o(u,{type:"primary"},{default:i((()=>[O])),_:1})])),_:1},8,["file-list"]),o(c,{"stroke-width":16,percentage:d(g)},null,8,["percentage"]),o(u,{style:{"margin-top":"20px"},onClick:w,disabled:d(f)},{default:i((()=>[A])),_:1},8,["disabled"]),o("p",null,[B,o("strong",null,v(s.judgeFiles),1)])])}}});const R=o("div",null,[o("p",null,"提交特判程序")],-1),Z=o("p",null,"上传ZIP文件.",-1),H=o("p",null,"(请确保你的测试文件名称为1-n, 并且以.in和.out为结尾)",-1),J=r("选择文件"),K=r("提交"),Q=r("请保证评测数据组数为 "),W=o("div",{id:"editor"},null,-1),X=r("提交"),Y=r("返回");var $=e({expose:[],props:{judgeFiles:{type:String,default:""},pid:{type:String,default:""}},setup(e){const s=e;let u=m(),p=t(),r=new FormData,y=t(!1),b=t(!1),_=t(!0),x=t(0),S=h();function V(e,t){x.value=0}function F(e){r.append("problemId",String(s.pid)),r.append("judgeFile",e.file),r.append("judgeFiles",s.judgeFiles);const t={onUploadProgress:e=>{x.value=Number((e.loaded/e.total*100).toFixed(2))}};c.post("/admin/problem/data",r,t).then((e=>{y.value=!0,_.value=!(b.value&&y.value),0==_.value&&(null==u||u.emit("done",{}))}))}function k(){w({title:"成功",message:"上传成功",type:"success"})}function U(){S.push("/problem")}let I=async function(){return Promise.all(["http://cdn.bootcss.com/ace/1.2.4/ace.js","http://cdn.bootcss.com/ace/1.2.4/ext-language_tools.js","http://cdn.bootcss.com/ace/1.2.4/mode-c_cpp.js"].map((e=>j(e))))}();g((async()=>{await I,function(){let e="//input the spj source code\n";e+="#include <stdio.h>\n",e+="\n",e+="int main(int argc, char** argv) {\n",e+='    FILE* f_in = fopen(argv[1], "r"); //std data input\n',e+='    FILE* f_out = fopen(argv[2], "r"); //std data output\n',e+='    FILE* f_code = fopen(argv[3], "r"); //source code\n',e+='    FILE* u_out = fopen(argv[4], "r"); //user output\n\n',e+="    return 0;\n",e+="}\n",ace.require("ace/ext/language_tools"),L.editor=ace.edit("editor"),L.editor.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0}),L.editor.setTheme("ace/theme/eclipse"),L.editor.getSession().setMode("ace/mode/c_cpp"),L.editor.setFontSize(16),L.editor.setShowPrintMargin(!1);let t=L.editor.getValue();L.editor.find(t),L.editor.replace(""),L.editor.setValue(e)}()}));const L=f({editor:null});function T(){let e={data:{code:L.editor.getValue(),problemId:s.pid}};c.post("admin/problem/spj",e).then((e=>{"200"==e.code&&(b.value=!0,_.value=!(b.value&&y.value),0==_.value&&(null==u||u.emit("done",{}))),w({title:"成功",message:"上传成功",type:"success"})}))}return(e,t)=>{const u=a("el-button"),r=a("el-upload"),c=a("el-progress"),m=a("el-row"),g=a("el-col");return n(),l("div",null,[R,o("div",null,[Z,H,o(r,{id:"upload",class:"upload-demo",action:"#",style:{width:"200px"},multiple:!1,limit:1,"http-request":F,"show-file-list":!0,accept:".zip","on-remove":V,"file-list":d(p)},{default:i((()=>[o(u,{type:"primary"},{default:i((()=>[J])),_:1})])),_:1},8,["file-list"]),o(c,{"stroke-width":16,percentage:d(x)},null,8,["percentage"]),o(u,{style:{"margin-top":"20px"},onClick:k},{default:i((()=>[K])),_:1}),o("p",null,[Q,o("strong",null,v(s.judgeFiles),1)])]),o("div",null,[o(m,{gutter:20},{default:i((()=>[W])),_:1}),o(m,{gutter:20,class:"row"},{default:i((()=>[o(g,{span:8},{default:i((()=>[o(u,{type:"primary",size:"medium",plain:"",onClick:T},{default:i((()=>[X])),_:1})])),_:1})])),_:1})]),o(u,{type:"primary",size:"medium",plain:"",onClick:U,disabled:d(_)},{default:i((()=>[Y])),_:1},8,["disabled"])])}}});const ee={style:{padding:"0 3em"}},te={key:0},le={key:1},oe={key:2};var ae=e({expose:[],setup(s){let u=t(0),p=t();const r={pdf:C,md:D,html:L},c={0:G,1:$};let m=t("md"),g=t("0"),f=t(),v=t("process");function h(e){v.value="success"}const j=e({setup:()=>()=>y(r[m.value],{onGo:_})}),w=e({setup:()=>()=>y(c[g.value],{onGo:_})});function _(e){let t=e.params;t&&t.docType&&t.isSpj&&t.pid&&(m.value=t.docType,g.value=t.isSpj,p.value=t.pid,f.value=t.judgeFile),u.value++>2&&(u.value=0)}return(e,t)=>{const s=a("el-step"),r=a("el-steps");return n(),l("div",ee,[o(r,{active:d(u),"finish-status":"success","process-status":d(v),style:{margin:"0.5em 2em"}},{default:i((()=>[o(s,{title:"题目编辑"}),o(s,{title:"题目内容上传"}),o(s,{title:"评测数据上传"})])),_:1},8,["active","process-status"]),0==d(u)?(n(),l("div",te,[o(k,{onGo:_})])):b("",!0),1==d(u)?(n(),l("div",le,[o(d(j),{pid:d(p)},null,8,["pid"])])):b("",!0),2==d(u)?(n(),l("div",oe,[o(d(w),{judgeFiles:d(f),pid:d(p),onDone:h},null,8,["judgeFiles","pid"])])):b("",!0)])}}});export default ae;

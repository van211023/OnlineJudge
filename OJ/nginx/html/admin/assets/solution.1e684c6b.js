import{d as e,r as a,q as t,C as l,b as o,c as s,i as n,k as i,A as p,F as r,l as d,n as u,a as c,g as m,p as h,e as g,h as b,M as f,N as y}from"./vendor.e45b1972.js";import{p as C,t as v}from"./paginationlogic.22ec78bb.js";import"./index.4d66c970.js";import{_ as I}from"./notification.8e3fe923.js";const w=d();h("data-v-19a81ef4");const x={class:"dialog-footer"},z=u("关 闭"),_=u("重判选中记录"),S=u("代码");g();var k=e({expose:[],props:{contestId:{type:String,default:""}},setup(e){const d=e;let u=a([]),h=a(""),g=C(u,{dataUrl:"admin/contest/solution/list",otherParams:{contestId:d.contestId}}),k=C(u,{dataUrl:"admin/contest/solution/search",otherParams:t({contestId:d.contestId,problemId:l((()=>h.value.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)))})}),{currentPage:j,pageCount:V,pageSize:U,pageSizes:A,handlePage:M,handlePageSize:P,refresh:T}=v(h,k,g);o((async()=>{T()}));let D=a(!1),q=a(""),F=a("");let N=a([]);function $(e){N.value=e}return(e,a)=>{const t=m("el-button"),l=m("el-dialog"),o=m("el-input"),d=m("el-table-column"),g=m("el-table"),C=m("el-pagination");return b(),s(r,null,[n(l,{title:"SulotionId: "+i(q),modelValue:i(D),"onUpdate:modelValue":a[3]||(a[3]=e=>p(D)?D.value=e:D=e),width:"60%"},{footer:w((()=>[n("span",x,[n(t,{type:"primary",onClick:a[2]||(a[2]=e=>p(D)?D.value=!1:D=!1)},{default:w((()=>[z])),_:1})])])),default:w((()=>[f(n("textarea",{"onUpdate:modelValue":a[1]||(a[1]=e=>p(F)?F.value=e:F=e),readonly:!0,style:{width:"100%",height:"50vh",margin:"0px"}},null,512),[[y,i(F)]])])),_:1},8,["title","modelValue"]),n("span",null,[n(t,{size:"small",icon:"el-icon-school",type:"primary",onClick:a[4]||(a[4]=e=>async function(){let e=N.value.map((e=>e.solutionId));try{await c.post("admin/contest/rejudge",{data:e}),I({title:"成功",message:`重判${e}成功`,type:"success"})}catch{}}())},{default:w((()=>[_])),_:1}),n(o,{placeholder:"按题号过滤",modelValue:i(h),"onUpdate:modelValue":a[5]||(a[5]=e=>p(h)?h.value=e:h=e),size:"small",style:{width:"20em",float:"right"},onInput:i(T)},{append:w((()=>[n(t,{icon:"el-icon-search",onClick:i(T)},null,8,["onClick"])])),_:1},8,["modelValue","onInput"])]),n(g,{data:i(u),style:{width:"100%",height:"calc(100vh - 175px)","margin-top":"0.6em","margin-bottom":"5px"},height:"style.height","cell-style":{padding:"4px 0px"},"header-cell-style":{padding:"8px 0px"},stripe:"",border:!0,fit:"",onSelectionChange:$},{default:w((()=>[n(d,{type:"selection",width:"40"}),n(d,{sortable:"",fixed:"",prop:"solutionId",label:"ID",width:"65"}),n(d,{prop:"isAccepted",label:"是否通过",width:"100"}),n(d,{prop:"submitTime",label:"提交时间",width:"170"}),n(d,{prop:"judgeTime",label:"判题时间",width:"170"}),n(d,{prop:"lang",label:"语言"}),n(d,{prop:"problemId",label:"题号",width:"50"}),n(d,{prop:"userId",label:"用户ID"}),n(d,{prop:"name",label:"用户名"}),n(d,{prop:"maxMemory",label:"内存(M)"}),n(d,{prop:"maxTime",label:"最长用时(MS)",width:"120"}),n(d,{prop:"sumTime",label:"总用时(M)",width:"100"}),n(d,{prop:"sumCases",label:"总测试组数",width:"100"}),n(d,{prop:"passCases",label:"通过组数"}),n(d,{fixed:"right",prop:"",label:"操作",width:"70"},{default:w((e=>[n(t,{type:"primary",size:"mini",onClick:a=>async function(e){D.value=!0,q.value=e;try{F.value=(await c.get("admin/contest/code",{params:{solutionId:e}})).data.code}catch{D.value=!1}}(e.row.solutionId)},{default:w((()=>[S])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n(C,{background:"",onSizeChange:i(P),onCurrentChange:i(M),"current-page":i(j),"page-sizes":i(A),"page-size":i(U),layout:"total, sizes, prev, pager, next, jumper",total:i(V)},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])],64)}}});k.__scopeId="data-v-19a81ef4";export default k;
